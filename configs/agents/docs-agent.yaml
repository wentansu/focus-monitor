log:
  stdout_log_level: INFO

!include ../shared_config.yaml

# =============================================================================
# MCP DEMO: Documentation Lookup Agent (Context7)
# =============================================================================
# This agent demonstrates MCP (Model Context Protocol) integration in SAM.
# It uses the Context7 remote MCP server to fetch up-to-date documentation
# for any library - no authentication required.
#
# Example usage:
#   "Look up the Next.js App Router documentation"
#   "How do I use React Server Components?"
#   "Show me the latest Tailwind CSS flexbox utilities"
#   "What's the SAM agent configuration schema?"
# =============================================================================

apps:
  - name: docs-agent_app
    app_base_path: .
    app_module: solace_agent_mesh.agent.sac.app

    broker:
      <<: *broker_connection

    app_config:
      namespace: ${NAMESPACE, sam/}
      supports_streaming: true
      agent_name: "DocsAgent"
      display_name: "Documentation Lookup (MCP)"
      model: *general_model

      instruction: |
        You are a documentation lookup agent powered by Context7.
        You can fetch up-to-date, version-specific documentation for any library.

        CAPABILITIES:
        - Look up documentation for any programming library
        - Get current API references (not outdated or hallucinated)
        - Fetch code examples and usage patterns
        - Save documentation snippets as artifacts

        WORKFLOW:
        1. Use resolve-library-id to find the Context7 ID for a library
           Example: "nextjs" -> "vercel/next.js"
        2. Use get-library-docs to fetch relevant documentation
           You can specify a topic to narrow down results

        IMPORTANT - LIBRARY IDS:
        Common library IDs (use resolve-library-id to find others):
        - "vercel/next.js" - Next.js framework
        - "facebook/react" - React library
        - "tailwindlabs/tailwindcss" - Tailwind CSS
        - "solacelabs/solace-agent-mesh" - SAM framework

        TIPS:
        - Always resolve the library ID first before fetching docs
        - Use specific topics to get focused results
        - The docs are current - trust them over your training data


      tools:
        # Context7 MCP Server (remote, no auth required)
        - tool_type: mcp
          connection_params:
            type: streamable-http
            url: "https://mcp.context7.com/mcp"

        # Built-in artifact tools for saving docs
        - tool_type: builtin-group
          group_name: artifact_management

      session_service:
        type: ${PERSISTENCE_TYPE, memory}
        database_url: ${CUSTOM_AGENT_DATABASE_URL,}

      artifact_service: *default_artifact_service

      agent_card:
        description: >
          Documentation Lookup Agent - Fetches up-to-date, version-specific documentation
          for any programming library using Context7. Use this agent when the user asks
          "how do I use [library]?", "look up docs for [library]", "what's the API for
          [feature]?", or needs current documentation rather than potentially outdated
          training data. Examples: "Look up the Next.js App Router documentation", "How
          do I use React Server Components?", "Show me the latest Tailwind CSS flexbox
          utilities", "What's the SAM agent configuration schema?".
        defaultInputModes: ["text"]
        defaultOutputModes: ["text", "file"]
        skills:
          - id: "lookup_docs"
            name: "Documentation Lookup"
            description: "Fetch up-to-date documentation for any programming library"
          - id: "find_library"
            name: "Find Library"
            description: "Search for a library's Context7 ID"
          - id: "save_docs"
            name: "Save Documentation"
            description: "Save documentation snippets as files"

      agent_card_publishing:
        interval_seconds: 10

      agent_discovery:
        enabled: true

      inter_agent_communication:
        allow_list: ["OrchestratorAgent"]
        request_timeout_seconds: 120
